<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Detecting HTML5 Features - Dive Into HTML5</title>
</head>

<body style="padding-left:200px;padding-right:200px;">
    <a>You are here: </a>
    <a href="https://www.diveintohtml5.info/index.html" style="color:red;">Home</a>
    <a href="http://diveintohtml5.info/table-of-contents.html#detect" style="color:red;">Dive Into HTML5</a>
    <h1 style="text-align:center;font-family:Palatino Linotype;">№2</h1>
    <h1 style="text-align:center;">DETECTING HTML5 FEATURES</h1>
    <h2 style="text-align:center;">DIVING IN</h2>
    <p style="font-size: 120%">You may well ask: “How can I start using HTML5 if older browsers don’t support it?” But the question itself is misleading. HTML5 is not one big thing; it is a collection of individual features. So you can’t detect “HTML5 support,” because that doesn’t make any sense. But you can detect support for individual features, like canvas, video, or geolocation.</p>
    <h2 style="text-align:center;">DETECTION TECHNIQUES</h2>
    <p style="font-size: 120%">When your browser renders a web page, it constructs a Document Object Model (DOM), a collection of objects that represent the HTML elements on the page. Every element — every &lt;p&gt;, every &lt;div&gt;, every &lt;span&gt; — is represented in the DOM by a different object. (There are also global objects, like window and document, that aren’t tied to specific elements.)</p>
    <img src="http://diveintohtml5.info/i/openclipart.org_johnny_automatic_peeking_out_the_window.png" alt="Image" style="width:250px; length:500px; float:right">
    <p style="font-size: 120%">All DOM objects share a set of common properties, but some objects have more than others. In browsers that support HTML5 features, certain objects will have unique properties. A quick peek at the DOM will tell you which features are supported.</p>
    <p style="font-size: 120%">There are four basic techniques for detecting whether a browser supports a particular feature. From simplest to most complex:</p>
    <ol style="font-size: 120%">
        <li>
            <p>Check if a certain property exists on a global object (such as window or navigator).</p>
            <a>Example: </a>
            <a href="http://diveintohtml5.info/detect.html#geolocation" style="color:red;">testing for geolocation support</a>
        </li>
        <li>
            <p>Create an element, then check if a certain property exists on that element.</p>
            <a>Example: </a>
            <a href="http://diveintohtml5.info/detect.html#canvas" style="color:red;">testing for canvas support</a>
        </li>
        <li>
            <p>Create an element, check if a certain method exists on that element, then call the method and check the value it returns.</p>
            <a>Example: </a>
            <a href="http://diveintohtml5.info/detect.html#video-formats" style="color:red;">testing which video formats are supported</a>
        </li>
        <li>
            <p>Create an element, set a property to a certain value, then check if the property has retained its value.</p>
            <a>Example: </a>
            <a href="http://diveintohtml5.info/detect.html#input-types" style="color:red;">testing which &ltinput&gt types are supported</a>
        </li>
    </ol>
    <h2 style="text-align:center;">MODERNIZR, AN HTML5 DETECTION LIBRARY</h2>
    <p style="font-size: 120%"><a href="https://modernizr.com/" style="color:red;">Modernizr</a> is an open source, MIT-licensed JavaScript library that detects support for many HTML5 & CSS3 features. You should always use the latest version. To use it, include the following &ltscript&gt element at the top of your page.</p>
    <pre style="font-size:120%">
	&lt!DOCTYPE html&gt
	&lthtml&gt
	&lthead&gt
			&ltmeta charset="utf-8"&gt
			&lttitle&gtDive Into HTML5&lt/title&gt
			<a style="background-color:yellow;">&ltscript src="modernizr.min.js"&gt&lt/script&gt</a>
	&lt/head&gt
	&ltbody&gt
		...
	&lt/body&gt
	&lt/html&gt
	</pre>
    <p style="font-size: 120%">Modernizr runs automatically. There is no modernizr_init() function to call. When it runs, it creates a global object called Modernizr, that contains a set of Boolean properties for each feature it can detect. For example, if your browser supports the <a href="http://diveintohtml5.info/canvas.html" style="color:red;">canvas API</a>, the Modernizr.canvas property will be true. If your browser does not support the canvas API, the Modernizr.canvas property will be false.</p>
    <pre style="font-size:120%">
	if (Modernizr.canvas) {
			// let's draw some shapes!
	} else {
			// no native canvas support available :(
	}
	</pre>
    <h2 style="text-align:center;">CANVAS</h2>
    <img src="http://diveintohtml5.info/i/openclipart.org_johnny_automatic_fishing_boat.png" style="width:300px;  float:right">
    <p style="font-size: 120%">HTML5 defines <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html" style="color:red;">the &ltcanvas&gt element</a> as “a resolution-dependent bitmap canvas that can be used for rendering graphs, game graphics, or other visual images on the fly.” A canvas is a rectangle in your page where you can use JavaScript to draw anything you want. HTML5 defines a set of functions (“the canvas API”) for drawing shapes, defining paths, creating gradients, and applying transformations.</p>
    <p style="font-size: 120%">Checking for the canvas API uses <a href="http://diveintohtml5.info/detect.html#techniques" style="color:red;">detection technique #2</a>. If your browser supports the canvas API, the DOM object it creates to represent a &ltcanvas&gt element will have a <a href="http://diveintohtml5.info/canvas.html#shapes" style="color:red;">getContext() method</a>. If your browser doesn’t support the canvas API, the DOM object it creates for a &ltcanvas&gt element will only have the set of common properties, but not anything canvas-specific.</p>
    <pre style="font-size:120%">
	function supports_canvas() {
			return !!document.createElement('canvas').getContext;
	}
	</pre>
    <p style="font-size: 120%">This function starts by creating a dummy &ltcanvas&gt element. But the element is never attached to your page, so no one will ever see it. It’s just floating in memory, going nowhere and doing nothing, like a canoe on a lazy river.</p>
    <pre style="font-size:120%">
	return !!document.<a style="background-color:yellow;">createElement('canvas')</a>.getContext;
	</pre>
    <p style="font-size: 120%">As soon as you create the dummy &ltcanvas&gt element, you test for the presence of a getContext() method. This method will only exist if your browser supports the canvas API.</p>
    <pre style="font-size:120%">
	return !!document.createElement('canvas').<a style="background-color:yellow;">getContext</a>;
	</pre>
    <p style="font-size: 120%">Finally, you use the double-negative trick to force the result to a Boolean value (true or false).</p>
    <pre style="font-size:120%">
	return <a style="background-color:yellow;">!!</a>document.createElement('canvas').getContext;
	</pre>
    <p style="font-size: 120%">This function will detect support for most of the canvas API, including <a href="http://diveintohtml5.info/canvas.html#shapes" style="color:red;">shapes</a>, <a href="http://diveintohtml5.info/canvas.html#paths" style="color:red;">paths</a>, <a href="http://diveintohtml5.info/canvas.html#gradients" style="color:red;">gradients & patterns</a>. It will not detect the third-party <a href="http://diveintohtml5.info/canvas.html#ie" style="color:red;">explorercanvas library</a> that implements the canvas API in Microsoft Internet Explorer.</p>
    <p style="font-size: 120%">Instead of writing this function yourself, you can use <a href="http://diveintohtml5.info/detect.html#modernizr" style="color:red;">Modernizr</a> to detect support for the canvas API.</p>
    <pre style="font-size:120%">
	if (<a style="background-color:yellow;">Modernizr.canvas</a>) {
			// let's draw some shapes!
	} else {
			// no native canvas support available :(
	}
	</pre>
    <p style="font-size: 120%">There is a separate test for the canvas text API, which I will demonstrate next.</p>
    <h2 style="text-align:center;">CANVAS TEXT</h2>
    <p style="font-size: 120%">Even if your browser supports the <a href="http://diveintohtml5.info/detect.html#canvas" style="color:red;">canvas API</a>, it might not support the canvas text API. The canvas API grew over time, and the text functions were added late in the game. Some browsers shipped with canvas support before the text API was complete.</p>
    <p style="font-size: 120%">Checking for the canvas text API uses <a href="http://diveintohtml5.info/detect.html#techniques" style="color:red;">detection technique #2</a>. If your browser supports the canvas API, the DOM object it creates to represent a &ltcanvas&gt element will have the <a href="http://diveintohtml5.info/canvas.html#shapes" style="color:red;">getContext() method</a>. If your browser doesn’t support the canvas API, the DOM object it creates for a &ltcanvas&gt element will only have the set of common properties, but not anything canvas-specific.</p>
    <pre style="font-size:120%">
	function supports_canvas_text() {
			if (!supports_canvas()) { return false; }
			var dummy_canvas = document.createElement('canvas');
			var context = dummy_canvas.getContext('2d');
			return typeof context.fillText == 'function';
	}
	</pre>
    <p style="font-size: 120%">The function starts by <a href="http://diveintohtml5.info/detect.html#canvas" style="color:red;">checking for canvas support</a>, using the supports_canvas() function you just saw in the previous section. If your browser doesn’t support the canvas API, it certainly won’t support the canvas text API!</p>
    <pre style="font-size:120%">
	if (<a style="background-color:yellow;">!supports_canvas()</a>) { return false; }
	</pre>
    <p style="font-size: 120%">Next, you create a dummy &ltcanvas&gt element and get its drawing context. This is guaranteed to work, because the supports_canvas() function already checked that the getContext() method exists on all canvas objects.</p>
    <pre style="font-size:120%">
	var dummy_canvas = document.createElement('canvas');
	var context = <a style="background-color:yellow;">dummy_canvas.getContext('2d')</a>;
	</pre>
    <p style="font-size: 120%">Finally, you check whether the drawing context has a fillText() function. If it does, the canvas text API is available. Hooray!</p>
    <pre style="font-size:120%">
	return <a style="background-color:yellow;">typeof context.fillText == 'function'</a>;
	</pre>
    <p style="font-size: 120%">Instead of writing this function yourself, you can use <a href="http://diveintohtml5.info/detect.html#modernizr" style="color:red;">Modernizr</a> to detect support for the canvas text API.</p>
    <pre style="font-size:120%">
	if (<a style="background-color:yellow;">Modernizr.canvastext</a>) {
			// let's draw some text!
	} else {
			// no native canvas text support available :(
	}
	</pre>
    <h2 style="text-align:center;">VIDEO</h2>
    <p style="font-size: 120%">HTML5 defines a new element called &ltvideo&gt for embedding video in your web pages. Embedding video used to be impossible without third-party plugins such as Apple QuickTime® or Adobe Flash®.</p>
    <p style="font-size: 120%">The &ltvideo&gt element is designed to be usable without any detection scripts. You can specify multiple video files, and browsers that support HTML5 video will choose one based on what video formats they support. (See “A gentle introduction to video encoding” <a href="http://diveintomark.org/archives/2008/12/18/give-part-1-container-formats" style="color:red;">part 1: container formats</a> and <a href="http://diveintomark.org/archives/2008/12/19/give-part-2-lossy-video-codecs" style="color:red;">part 2: lossy video codecs</a> to learn about different video formats.)</p>
    <p style="font-size: 120%">Browsers that don’t support HTML5 video will ignore the &ltvideo&gt element completely, but you can use this to your advantage and tell them to play video through a third-party plugin instead. Kroc Camen has designed a solution called <a href="http://camendesign.com/code/video_for_everybody" style="color:red;">Video for Everybody!</a> that uses HTML5 video where available, but falls back to QuickTime or Flash in older browsers. This solution uses no JavaScript whatsoever, and it works in virtually every browser, including mobile browsers.</p>
    <p style="font-size: 120%">If you want to do more with video than plop it on your page and play it, you’ll need to use JavaScript. Checking for video support uses <a href="http://diveintohtml5.info/detect.html#techniques" style="color:red;">detection technique #2</a>. If your browser supports HTML5 video, the DOM object it creates to represent a &ltvideo&gt element will have a canPlayType() method. If your browser doesn’t support HTML5 video, the DOM object it creates for a &ltvideo&gt element will have only the set of properties common to all elements. You can check for video support using this function:</p>
    <pre style="font-size:120%">
	function supports_video() {
			return !!document.createElement('video').canPlayType;
	}
	</pre>
    <p style="font-size: 120%">Instead of writing this function yourself, you can use <a href="http://diveintohtml5.info/detect.html#modernizr" style="color:red;">Modernizr</a> to detect support for HTML5 video.</p>
    <pre style="font-size:120%">
	if (<a style="background-color:yellow;">Modernizr.video</a>) {
			// let's play some video!
	} else {
			// no native video support available :(
			// maybe check for QuickTime or Flash instead
	}
	</pre>
    <p style="font-size: 120%">In <a href="http://diveintohtml5.info/video.html" style="color:red;">the Video chapter</a>, I’ll explain another solution that uses these detection techniques to convert &ltvideo&gt elements to Flash-based video players, for the benefit of browsers that don’t support HTML5 video.</p>
    <p style="font-size: 120%">There is a separate test for detecting which video formats your browser can play, which I will demonstrate next.</p>
    <h2 style="text-align:center;">VIDEO FORMATS</h2>
    <p style="font-size: 120%">Video formats are like written languages. An English newspaper may convey the same information as a Spanish newspaper, but if you can only read English, only one of them will be useful to you! To play a video, your browser needs to understand the “language” in which the video was written.</p>
    <p style="font-size: 120%">The “language” of a video is called a “codec” — this is the algorithm used to encode the video into a stream of bits. There are dozens of codecs in use all over the world. Which one should you use? The unfortunate reality of HTML5 video is that browsers can’t agree on a single codec. However, they seem to have narrowed it down to two. One codec costs money (because of patent licensing), but it works in <a href="https://www.apple.com/safari/" style="color:red;">Safari</a> and on the iPhone. (This one also works in Flash if you use a solution like <a href="http://camendesign.com/code/video_for_everybody" style="color:red;">Video for Everybody!</a>) The other codec is free and works in open source browsers like <a href="https://www.chromium.org/" style="color:red;">Chromium</a> and <a href="https://www.mozilla.org/en-US/firefox/?utm_medium=referral&utm_source=getfirefox-com" style="color:red;">Mozilla Firefox</a>.</p>
    <p style="font-size: 120%">Checking for video format support uses <a href="http://diveintohtml5.info/detect.html#techniques" style="color:red;">detection technique #3</a>. If your browser supports HTML5 video, the DOM object it creates to represent a &ltvideo&gt element will have a canPlayType() method. This method will tell you whether the browser supports a particular video format.</p>
    <p style="font-size: 120%">This function checks for the patent-encumbered format supported by Macs and iPhones.</p>
    <pre style="font-size:120%">
	function supports_h264_baseline_video() {
			if (!supports_video()) { return false; }
			var v = document.createElement("video");
			return v.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');
	}
	</pre>
    <p style="font-size: 120%">The function starts by <a href="http://diveintohtml5.info/detect.html#video" style="color:red;">checking for HTML5 video support</a>, using the supports_video() function you just saw in the previous section. If your browser doesn’t support HTML5 video, it certainly won’t support any video formats!</p>
    <pre style="font-size:120%">
	if (<a style="background-color:yellow;">!supports_video()</a>) { return false; }
	</pre>
    <p style="font-size: 120%">Then the function creates a dummy &ltvideo&gt element (but doesn’t attach it to the page, so it won’t be visible) and calls the canPlayType() method. This method is guaranteed to be there, because the supports_video() function just checked for it.</p>
    <pre style="font-size:120%">
	 var <a style="background-color:yellow;">v</a> = document.createElement("video");
	</pre>
    <p style="font-size: 120%">A “video format” is really a combination of different things. In technical terms, you’re asking the browser whether it can play H.264 Baseline video and AAC LC audio in an MPEG-4 container. (I’ll explain what all that means in <a href="http://diveintohtml5.info/video.html" style="color:red;">the Video chapter</a>. You might also be interested in reading <a href="http://diveintomark.org/tag/give" style="color:red;">A gentle introduction to video encoding</a>.)</p>
    <pre style="font-size:120%">
	 return v.canPlayType('<a style="background-color:yellow;">video/mp4; codecs="avc1.42E01E, mp4a.40.2"</a>');
	</pre>
    <p style="font-size: 120%">The canPlayType() function doesn’t return true or false. In recognition of how complex video formats are, the function returns a string:</p>
    <ul style="font-size: 120%">
        <li>"probably" if the browser is fairly confident it can play this format</li>
        <li>"maybe" if the browser thinks it might be able to play this format</li>
        <li>"" (an empty string) if the browser is certain it can’t play this format</li>
    </ul>
    <p style="font-size: 120%">This second function checks for the open video format supported by Mozilla Firefox and other open source browsers. The process is exactly the same; the only difference is the string you pass in to the canPlayType() function. In technical terms, you’re asking the browser whether it can play Theora video and Vorbis audio in an Ogg container.</p>
    <pre style="font-size:120%">
	function supports_ogg_theora_video() {
			if (!supports_video()) { return false; }
			var v = document.createElement("video");
			return v.canPlayType('<a style="background-color:yellow;">video/ogg; codecs="theora, vorbis"</a>');
	}
	</pre>
    <p style="font-size: 120%">Finally, <a href="https://www.webmproject.org/" style="color:red;">WebM</a> is a newly open-sourced (and non-patent-encumbered) video codec that will be included in the next version of major browsers, including Chrome, <a href="http://nightly.mozilla.org/webm/" style="color:red;">Firefox</a>, and <a href="http://labs.opera.com/news/2010/05/19/" style="color:red;">Opera</a>. You can use the same technique to detect support for open WebM video.</p>
    <pre style="font-size:120%">
	function supports_webm_video() {
			if (!supports_video()) { return false; }
			var v = document.createElement("video");
			return v.canPlayType('<a style="background-color:yellow;">video/webm; codecs="vp8, vorbis"</a>');
	}
	</pre>
    <p style="font-size: 120%">Instead of writing this function yourself, you can use <a href="http://diveintohtml5.info/detect.html#modernizr" style="color:red;">Modernizr</a> (1.5 or later) to detect support for different HTML5 video formats.</p>
    <pre style="font-size:120%">
	if (Modernizr.video) {
			// let's play some video! but what kind?
			if (<a style="background-color:yellow;">Modernizr.video.webm</a>) {
			 // try WebM
			} else if (<a style="background-color:yellow;">Modernizr.video.ogg</a>) {
			 // try Ogg Theora + Vorbis in an Ogg container
			} else if (<a style="background-color:yellow;">Modernizr.video.h264</a>){
			 // try H.264 video + AAC audio in an MP4 container
			}
	}
	</pre>
    <h2 style="text-align:center;">LOCAL STORAGE</h2>
    <p style="font-size: 120%"><a href="http://dev.w3.org/html5/webstorage/" style="color:red;">HTML5 storage</a> provides a way for web sites to store information on your computer and retrieve it later. The concept is similar to cookies, but it’s designed for larger quantities of information. Cookies are limited in size, and your browser sends them back to the web server every time it requests a new page (which takes extra time and precious bandwidth). HTML5 storage stays on your computer, and web sites can access it with JavaScript after the page is loaded.</p>
    <div style="background-color:black;padding-bottom: 1px ">
        <h3 style="color:white;padding-left: 4px">ASK PROFESSOR MARKUP</h3>
        <p style="background-color:white;margin:1px;padding:40px;font-size: 120%">Q: Is local storage really part of HTML5? Why is it in a separate specification?<br>
            A: The short answer is yes, local storage is part of HTML5. The slightly longer answer is that local storage used to be part of the main HTML5 specification, but it was split out into a separate specification because some people in the HTML5 Working Group complained that HTML5 was too big. If that sounds like slicing a pie into more pieces to reduce the total number of calories… well, welcome to the wacky world of standards.</p>
    </div>
    <p style="font-size: 120%">Checking for HTML5 storage support uses <a href="http://diveintohtml5.info/detect.html#techniques" style="color:red;">detection technique #1</a>. If your browser supports HTML5 storage, there will be a localStorage property on the global window object. If your browser doesn’t support HTML5 storage, the localStorage property will be undefined. Due to an unfortunate bug in older versions of Firefox, this test will raise an exception if cookies are disabled, so the entire test is wrapped in a try..catch statement.</p>
    <pre style="font-size:120%">
	function supports_local_storage() {
		try {
			return 'localStorage' in window && window['localStorage'] !== null;
		} catch(e){
			return false;
		}
	}
	</pre>
    <p style="font-size: 120%">Instead of writing this function yourself, you can use <a href="http://diveintohtml5.info/detect.html#modernizr" style="color:red;">Modernizr</a> (1.1 or later) to detect support for HTML5 local storage.</p>
    <pre style="font-size:120%">
	if (<a style="background-color:yellow;">Modernizr.localstorage</a>) {
		// window.localStorage is available!
	} else {
		// no native support for local storage :(
		// try a fallback or another third-party solution
	}
	</pre>
    <p style="font-size: 120%">Note that JavaScript is case-sensitive. The Modernizr attribute is called localstorage (all lowercase), but the DOM property is called window.localStorage (mixed case).</p>
    <div style="background-color:black;padding-bottom: 1px ">
        <h3 style="color:white;padding-left: 4px">ASK PROFESSOR MARKUP</h3>
        <p style="background-color:white;margin:1px;padding:40px;font-size: 120%">Q: How secure is my HTML5 storage database? Can anyone read it?<br>
            A: Anyone who has physical access to your computer can probably look at (or even change) your HTML5 storage database. Within your browser, any web site can read and modify its own values, but sites can’t access values stored by other sites. This is called a <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/origin-0.html#origin-0" style="color:red;">same-origin restriction.</a></p>
    </div>
    <h2 style="text-align:center;">WEB WORKERS</h2>
    <p style="font-size: 120%"><a href="http://www.whatwg.org/specs/web-workers/current-work/" style="color:red;">Web Workers</a> provide a standard way for browsers to run JavaScript in the background. With web workers, you can spawn multiple “threads” that all run at the same time, more or less. (Think of how your computer can run multiple applications at the same time, and you’re most of the way there.) These “background threads” can do complex mathematical calculations, make network requests, or access <a href="http://diveintohtml5.info/detect.html#local-storage" style="color:red;">local storage</a> while the main web page responds to the user scrolling, clicking, or typing.</p>
    <p style="font-size:120%">Checking for web workers uses <a href="http://diveintohtml5.info/detect.html#techniques" style="color:red;">detection technique #1</a>. If your browser supports the Web Worker API, there will be a Worker property on the global window object. If your browser doesn’t support the Web Worker API, the Worker property will be undefined.</p>
    <pre style="font-size:120%">
	function supports_web_workers() {
		return !!window.Worker;
	}
	</pre>
    <p style="font-size:120%">Instead of writing this function yourself, you can use <a href="http://diveintohtml5.info/detect.html#modernizr" style="color:red;">Modernizr</a> (1.1 or later) to detect support for web workers.</p>
    <pre style="font-size:120%">
	if (<a style="background-color:yellow;">Modernizr.webworkers</a>) {
		// window.Worker is available!
	} else {
		// no native support for web workers :(
		// try a fallback or another third-party solution
	}
	</pre>
    <p style="font-size:120%">Note that JavaScript is case-sensitive. The Modernizr attribute is called webworkers (all lowercase), but the DOM object is called window.Worker (with a capital “W” in “Worker”).</p>
    <h2 style="text-align:center;">OFFLINE WEB APPLICATIONS</h2>
    <p style="font-size:120%">Reading static web pages offline is easy: connect to the Internet, load a web page, disconnect from the Internet, drive to a secluded cabin, and read the web page at your leisure. (To save time, you may wish to skip the step about the cabin.) But what about web applications like <a href="http://mail.google.com/" style="color:red;">Gmail</a> or <a href="http://docs.google.com/" style="color:red;">Google Docs</a>? Thanks to HTML5, anyone (not just Google!) can build a web application that works offline.</p>
    <p style="font-size:120%"><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#offline" style="color:red;">Offline web applications</a> start out as online web applications. The first time you visit an offline-enabled web site, the web server tells your browser which files it needs in order to work offline. These files can be anything — HTML, JavaScript, images, even <a href="http://diveintohtml5.info/detect.html#video" style="color:red;">videos</a>. Once your browser downloads all the necessary files, you can revisit the web site even if you’re not connected to the Internet. Your browser will notice that you’re offline and use the files it has already downloaded. When you get back online, any changes you’ve made can be uploaded to the remote web server.</p>
    <p style="font-size:120%">Checking for offline support uses <a href="http://diveintohtml5.info/detect.html#techniques" style="color:red;">detection technique #1</a>. If your browser supports offline web applications, there will be an applicationCache property on the global window object. If your browser doesn’t support offline web applications, the applicationCache property will be undefined. You can check for offline support with the following function:</p>
    <pre style="font-size:120%">
	function supports_offline() {
		return !!window.applicationCache;
	}
	</pre>
    <p style="font-size:120%">Instead of writing this function yourself, you can use <a href="http://diveintohtml5.info/detect.html#modernizr" style="color:red;">Modernizr</a> (1.1 or later) to detect support for offline web applications.</p>
    <pre style="font-size:120%">
	if (<a style="background-color:yellow;">Modernizr.applicationcache</a>) {
		// window.applicationCache is available!
	} else {
		// no native support for offline :(
		// try a fallback or another third-party solution
	}
	</pre>
    <p style="font-size:120%">Note that JavaScript is case-sensitive. The Modernizr attribute is called applicationcache (all lowercase), but the DOM object is called window.applicationCache (mixed case).</p>
    <h2 style="text-align:center;">GEOLOCATION</h2>
    <p style="font-size:120%">Geolocation is the art of figuring out where you are in the world and (optionally) sharing that information with people you trust. There is more than one way to figure out where you are — your IP address, your wireless network connection, which cell tower your phone is talking to, or dedicated GPS hardware that calculates latitude and longitude from information sent by satellites in the sky.</p>
    <div style="background-color:black;padding-bottom: 1px ">
        <h3 style="color:white;padding-left: 4px">ASK PROFESSOR MARKUP</h3>
        <p style="background-color:white;margin:1px;padding:40px;font-size: 120%">Q: Is geolocation part of HTML5? Why are you talking about it?<br>
            A: Geolocation support is being added to browsers right now, along with support for new HTML5 features. Strictly speaking, geolocation is being standardized by the <a href="http://www.w3.org/2008/geolocation/" style="color:red;">Geolocation Working Group</a>, which is separate from the HTML5 Working Group. But I’m going to talk about geolocation in this book anyway, because it’s part of the evolution of the web that’s happening now.</p>
    </div>
    <p style="font-size:120%">Checking for geolocation support uses <a href="http://diveintohtml5.info/detect.html#techniques" style="color:red;">detection technique #1</a>. If your browser supports the geolocation API, there will be a geolocation property on the global navigator object. If your browser doesn’t support the geolocation API, the geolocation property will not be present inside of navigator. Here’s how to check for geolocation support:</p>
    <pre style="font-size:120%">
	function supports_geolocation() {
		return 'geolocation' in navigator;
	}
	</pre>
    <p style="font-size:120%">Instead of writing this function yourself, you can use <a href="http://diveintohtml5.info/detect.html#modernizr" style="color:red;">Modernizr</a> to detect support for the geolocation API.</p>
    <pre style="font-size:120%">
	if (<a style="background-color:yellow;">Modernizr.geolocation</a>) {
		// let's find out where you are!
	} else {
		// no native geolocation support available :(
		// try geoPosition.js or another third-party solution
	}
	</pre>
    <p style="font-size:120%">If your browser does not support the geolocation API natively, there is still hope. <a href="https://github.com/estebanav/javascript-mobile-desktop-geolocation" style="color:red;">GeoPosition.js</a> is a JavaScript library that aims to provide Geolocation support in older browsers like Blackberry, Palm OS, and Microsoft Internet Explorer 6, 7, and 8. It’s not quite the same as the navigator.geolocation API, but it serves the same purpose.</p>
    <p style="font-size:120%">There are also device-specific geolocation APIs on older mobile phone platforms, including <a href="http://www.tonybunce.com/2008/05/08/Blackberry-Browser-Amp-GPS.aspx" style="color:red;">BlackBerry</a>, <a href="http://www.forum.nokia.com/infocenter/index.jsp?topic=/Web_Developers_Library/GUID-4DDE31C7-EC0D-4EEC-BC3A-A0B0351154F8.html" style="color:red;">Nokia</a>, <a href="http://developer.palm.com/index.php?option=com_content&view=article&id=1673#GPS-getCurrentPosition" style="color:red;">Palm</a>, and <a href="http://bondi.omtp.org/1.0/apis/geolocation.html" style="color:red;">OMTP BONDI</a>.</p>
    <p style="font-size:120%">The <a href="http://diveintohtml5.info/geolocation.html" style="color:red;">chapter on geolocation</a> will go into excruciating detail about how to use all of these different APIs.</p>
    <h2 style="text-align: center">INPUT TYPES</h2>
    <p style="font-size:120%">You know all about web forms, right? Make a &ltform&gt, add a few &ltinput type="text"&gt elements and maybe an &ltinput type="password"&gt, and finish it off with an &ltinput type="submit"&gt button.</p>
    <p style="font-size:120%">You don’t know the half of it. HTML5 defines over a dozen new input types that you can use in your forms.</p>
    <ol style="font-size: 120%">
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#text-state-and-search-state" style="color:red;">&ltinput type="search"&gt</a> for search boxes</li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/number-state.html#number-state" style="color:red;">&ltinput type="number"&gt</a> for spinboxes</li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/number-state.html#range-state" style="color:red;">&ltinput type="range"&gt</a> for sliders</li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/number-state.html#color-state" style="color:red;">&ltinput type="color"&gt</a> for color pickers</li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#telephone-state" style="color:red;">&ltinput type="tel"&gt</a> for telephone numbers</li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#url-state" style="color:red;">&ltinput type="url"&gt</a> for web addresses</li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#e-mail-state" style="color:red;">&ltinput type="email"&gt</a> for email addresses</li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#date-state" style="color:red;">&ltinput type="date"&gt</a> for calendar date pickers</li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#month-state" style="color:red;">&ltinput type="month"&gt</a> for months</li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#week-state" style="color:red;">&ltinput type="week"&gt</a> for weeks</li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#time-state" style="color:red;">&ltinput type="time"&gt</a> for timestaps</li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#date-and-time-state" style="color:red;">&ltinput type="datetime"&gt</a> for precise, absolute date+time stamps</li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#local-date-and-time-state" style="color:red;">&ltinput type="datetime-local"&gt</a> for local dates and times</li>
    </ol>
    <p style="font-size:120%">Checking for HTML5 input types uses <a href="http://diveintohtml5.info/detect.html#techniques" style="color:red;">detection technique #4</a>. First, you create a dummy &ltinput&gt element in memory. The default input type for all &ltinput&gt elements is "text". This will prove to be vitally important.</p>
    <pre style="font-size:120%">
	var i = document.createElement("input");
	</pre>
    <p style="font-size:120%">Next, set the type attribute on the dummy &ltinput&gt element to the input type you want to detect.</p>
    <pre style="font-size:120%">
	i.setAttribute("type", "color");
	</pre>
    <p style="font-size:120%">If your browser supports that particular input type, the type property will retain the value you set. If your browser doesn’t support that particular input type, it will ignore the value you set and the type property will still be "text".</p>
    <pre style="font-size:120%">
	return i.type !== "text";
	</pre>
    <p style="font-size:120%">Instead of writing 13 separate functions yourself, you can use <a href="http://diveintohtml5.info/detect.html#modernizr" style="color:red;">Modernizr</a> to detect support for all the new input types defined in HTML5. Modernizr reuses a single &ltinput&gt element to efficiently detect support for all 13 input types. Then it builds a hash called Modernizr.inputtypes, that contains 13 keys (the HTML5 type attributes) and 13 Boolean values (true if supported, false if not).</p>
    <pre style="font-size:120%">
	if (<a style="background-color:yellow;">!Modernizr.inputtypes.date</a>) {
		// no native support for &ltinput type="date"&gt :(
		// maybe build one yourself with Dojo or jQueryUI
	}
	</pre>
    <h2 style="text-align: center">PLACEHOLDER TEXT</h2>
    <p style="font-size:120%">Besides <a href="http://diveintohtml5.info/detect.html#input-types" style="color:red;">new input types</a>, HTML5 includes several small tweaks to existing forms. One improvement is the ability to set <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#the-placeholder-attribute" style="color:red;">placeholder text in an input field</a>. Placeholder text is displayed inside the input field as long as the field is empty and not focused. As soon you click on (or tab to) the input field, the placeholder text disappears. The <a href="http://diveintohtml5.info/forms.html#placeholder" style="color:red;">chapter on web forms</a> has screenshots if you’re having trouble visualizing it.</p>
    <p style="font-size:120%">Checking for placeholder support uses <a href="http://diveintohtml5.info/detect.html#techniques" style="color:red;">detection technique #2</a>. If your browser supports placeholder text in input fields, the DOM object it creates to represent an &ltinput&gt element will have a placeholder property (even if you don’t include a placeholder attribute in your HTML). If your browser doesn’t support placeholder text, the DOM object it creates for an &ltinput&gt element will not have a placeholder property.</p>
    <pre style="font-size:120%">
	function supports_input_placeholder() {
		var i = document.createElement('input');
		return 'placeholder' in i;
	}
	</pre>
    <p style="font-size: 120%">Instead of writing this function yourself, you can use <a href="http://diveintohtml5.info/detect.html#modernizr" style="color:red;">Modernizr</a> (1.1 or later) to detect support for placeholder text.</p>
    <pre style="font-size:120%">
	if (<a style="background-color:yellow;">Modernizr.input.placeholder</a>) {
		// your placeholder text should already be visible!
	} else {
		// no placeholder support :(
		// fall back to a scripted solution
	}
	</pre>
    <h2 style="text-align: center">FORM AUTOFOCUS</h2>
    <p style="font-size: 120%">Web sites can use JavaScript to focus the first input field of a web form automatically. For example, the home page of <a href="http://www.google.com/" style="color:red;">Google.com</a> will autofocus the input box so you can type your search keywords without having to position the cursor in the search box. While this is convenient for most people, it can be annoying for power users or people with special needs. If you press the space bar expecting to scroll the page, the page will not scroll because the focus is already in a form input field. (It types a space in the field instead of scrolling.) If you focus a different input field while the page is still loading, the site’s autofocus script may “helpfully” move the focus back to the original input field upon completion, disrupting your flow and causing you to type in the wrong place.</p>
    <p style="font-size: 120%">Because the autofocusing is done with JavaScript, it can be tricky to handle all of these edge cases, and there is little recourse for people who don’t want a web page to “steal” the focus.</p>
    <p style="font-size: 120%">To solve this problem, HTML5 introduces <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#autofocusing-a-form-control" style="color:red;">an autofocus attribute on all web form controls</a>. The autofocus attribute does exactly what it says on the tin: it moves the focus to a particular input field. But because it’s just markup instead of a script, the behavior will be consistent across all web sites. Also, browser vendors (or extension authors) can offer users a way to disable the autofocusing behavior.</p>
    <p style="font-size: 120%">Checking for autofocus support uses <a href="http://diveintohtml5.info/detect.html#techniques" style="color:red;">detection technique #2</a>. If your browser supports autofocusing web form controls, the DOM object it creates to represent an &ltinput&gt element will have an autofocus property (even if you don’t include the autofocus attribute in your HTML). If your browser doesn’t support autofocusing web form controls, the DOM object it creates for an &ltinput&gt element will not have an autofocus property. You can detect autofocus support with this function:</p>
    <pre style="font-size:120%">
	function supports_input_autofocus() {
		var i = document.createElement('input');
		return 'autofocus' in i;
	}
	</pre>
    <p style="font-size:120%">Instead of writing this function yourself, you can use <a href="http://diveintohtml5.info/detect.html#modernizr" style="color:red;">Modernizr</a> (1.1 or later) to detect support for autofocused form fields.</p>
    <pre style="font-size:120%">
	if (<a style="background-color:yellow;">Modernizr.input.autofocus</a>) {
		// autofocus works!
	} else {
		// no autofocus support :(
		// fall back to a scripted solution
	}
	</pre>
    <h2 style="text-align: center;">MICRODATA</h2>
    <p style="font-size:120%"><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#microdata" style="color:red;">Microdata</a> is a standardized way to provide additional semantics in your web pages. For example, you can use microdata to declare that a photograph is available under a specific Creative Commons license. As you’ll see in <a href="http://diveintohtml5.info/extensibility.html" style="color:red;">the distributed extensibility chapter</a>, you can use microdata to mark up an “About Me” page. Browsers, browser extensions, and search engines can convert your HTML5 microdata markup into a <a href="http://en.wikipedia.org/wiki/VCard" style="color:red;">vCard</a>, a standard format for sharing contact information. You can also define your own microdata vocabularies.</p>
    <p style="font-size:120%">The HTML5 microdata standard includes both HTML markup (primarily for search engines) and a set of DOM functions (primarily for browsers). There’s no harm in including microdata markup in your web pages. It’s nothing more than a few well-placed attributes, and search engines that don’t understand the microdata attributes will just ignore them. But if you need to access or manipulate microdata through the DOM, you’ll need to check whether the browser supports the microdata DOM API.</p>
    <p style="font-size:120%">Checking for HTML5 microdata API support uses <a href="http://diveintohtml5.info/detect.html#techniques" style="color:red;">detection technique #1</a>. If your browser supports the HTML5 microdata API, there will be a getItems() function on the global document object. If your browser doesn’t support microdata, the getItems() function will be undefined.</p>
    <pre style="font-size:120%">
	function supports_microdata_api() {
		return !!document.getItems;
	}
	</pre>
    <p style="font-size:120%">Modernizr does not yet support checking for the microdata API, so you’ll need to use the function like the one listed above.</p>
    <h2 style="text-align: center;">HISTORY API</h2>
    <p style="font-size:120%">The <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html" style="color:red;">HTML5 history API</a> is a standardized way to manipulate the browser history via script. Part of this API — navigating the history — has been available in previous versions of HTML. The new part in HTML5 is a way to add entries to the browser history, and respond when those entries are removed from the stack by the user pressing the browser’s back button. This means that the URL can continue to do its job as a unique identifier for the current resource, even in script-heavy applications that don’t ever perform a full page refresh.</p>
    <p style="font-size:120%">Checking for HTML5 history API support uses <a href="http://diveintohtml5.info/detect.html#techniques" style="color:red;">detection technique #1</a>. If your browser supports the HTML5 history API, there will be a pushState() function on the global history object. If your browser doesn’t support the history API, the pushState() function will be undefined.</p>
    <pre style="font-size:120%">
	function supports_history_api() {
		return !!(window.history && history.pushState);
	}
	</pre>
    <p style="font-size:120%">Instead of writing this function yourself, you can use <a href="http://diveintohtml5.info/detect.html#modernizr" style="color:red;">Modernizr</a> (1.6 or later) to detect support for the HTML5 history API.</p>
    <pre style="font-size:120%">
	if (<a style="background-color:yellow;">Modernizr.history</a>) {
		// history management works!
	} else {
		// no history support :(
		// fall back to a scripted solution like History.js
	}
	</pre>
    <h2 style="text-align: center;">FURTHER READING</h2>
    <p style="font-size:120%">Specifications and standards:</p>
    <ul style="list-style-type:disc; font-size:120%">
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html" style="color:red;">the &ltcanvas&gt element</a></li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#video" style="color:red;">the &ltvideo&gt element</a></li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#states-of-the-type-attribute" style="color:red;">&ltinput&gt types</a></li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#the-placeholder-attribute" style="color:red;">the &ltinput placeholder&gt attribute</a></li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#autofocusing-a-form-control" style="color:red;">the &ltinput autofocus&gt attribute</a></li>
        <li><a href="http://dev.w3.org/html5/webstorage/" style="color:red;">HTML5 storage</a></li>
        <li><a href="http://www.whatwg.org/specs/web-workers/current-work/" style="color:red;">Web Workers</a></li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#offline" style="color:red;">Offline web applications</a></li>
        <li><a href="http://www.w3.org/TR/geolocation-API/" style="color:red;">Geolocation API</a></li>
        <li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html" style="color:red;">Session history and navigation</a></li>
    </ul>
    <p style="font-size:120%">JavaScript libraries:</p>
    <ul style="list-style-type:disc; font-size:120%">
        <li><a href="http://diveintohtml5.info/detect.html#modernizr" style="color:red;">Modernizr</a>, an HTML5 detection library</li>
        <li><a href="http://code.google.com/p/geo-location-javascript/" style="color:red;">geo.js</a>, a geolocation API wrapper</li>
        <li><a href="https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills" style="color:red;">HTML5 Cross-browser Polyfills</a></li>
    </ul>
    <p style="font-size:120%">Other articles and tutorials:</p>
    <ul style="list-style-type:disc; font-size:120%">
        <li><a href="http://camendesign.com/code/video_for_everybody" style="color:red;">Video for Everybody!</a></li>
        <li><a href="http://diveintomark.org/tag/give" style="color:red;">A gentle introduction to video encoding</a></li>
        <li><a href="http://wiki.whatwg.org/wiki/Video_type_parameters" style="color:red;">Video type parameters</a></li>
        <li><a href="http://diveintohtml5.info/everything.html" style="color:red;">The All-In-One Almost-Alphabetical Guide to Detecting Everything</a></li>
        <li><a href="http://msdn.microsoft.com/en-us/ie/ff468705.aspx" style="color:red;">Internet Explorer 9 Guide for Developers</a></li>
    </ul>
    <p style="font-size:120%">This has been “Detecting HTML5 Features.” The <a href="http://diveintohtml5.info/table-of-contents.html" style="color:red;">full table of contents</a> has more if you’d like to keep reading.</p>
    <div style="background-color:black;padding-bottom: 1px">
        <h3 style="color:white;padding-left: 4px;">DID YOU KNOW?</h3>
        <p style="background-color:white;margin:1px;padding:40px;font-size: 120%">In association with Google Press, O’Reilly is distributing this book in a variety of formats, including paper, ePub, Mobi, and DRM-free PDF. The paid edition is called “HTML5: Up & Running,” and it is available now. This chapter is included in the paid edition.<br><br>
            If you liked this chapter and want to show your appreciation, you can <a href="http://www.amazon.com/HTML5-Up-Running-Mark-Pilgrim/dp/0596806027?ie=UTF8&tag=diveintomark-20&creativeASIN=0596806027" style="color:red;">buy “HTML5: Up & Running” with this affiliate link</a> or <a href="http://oreilly.com/catalog/9780596806033" style="color:red;">buy an electronic edition directly from O’Reilly</a>. You’ll get a book, and I’ll get a buck. I do not currently accept direct donations.</p>
    </div>
    <br>
    <p style="text-align: center">Copyright MMIX–MMXI <a href="http://diveintohtml5.info/about.html" style="color:black;">Mark Pilgrim</a></p>
</body>

</html>